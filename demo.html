
<html>
  <head>
  <meta charset="utf8" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.13.0/sql-wasm.js" integrity="sha512-Yra4xuTWinXfBpG2ftgDX8MVmMiOev1FtqiYs51+kEna/5peD0kZqAL1syYCH61f9gxmAFidIJz42IKcRhWMkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <script>
    config = {
      locateFile: filename => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.13.0/sql-wasm.wasm`

    }

    // The `initSqlJs` function is globally provided by all of the main dist files if loaded in the browser.
    // We must specify this locateFile function if we are loading a wasm file from anywhere other than the current html page's folder.

    initSqlJs(config).then(function(SQL){


        const dataPromise = fetch("./demo.db").then(res => res.arrayBuffer());
        const [SQL, buf] = await Promise.all([sqlPromise, dataPromise])
        const db = new SQL.Database(new Uint8Array(buf));

        const contents = db.exec("SELECT ID, TITLE FROM PAPERS");
  // contents is now [{columns:['col1','col2',...], values:[[first row], [second row], ...]}]
  console.log(contents[0]['columns']);
  console.log(contents[0]['values']);


/*
// Prepare a statement
      const stmt = db.prepare("SELECT ID, TITLE FROM PAPERS");
      stmt.getAsObject({$start:1, $end:1});

      // Bind new values
      stmt.bind({$start:1, $end:2});
      while(stmt.step()) { //
        const row = stmt.getAsObject();
        console.log('Here is a row: ' + JSON.stringify(row));
      }
*/


/*

      //Create the database
      const db = new SQL.Database();
      // Run a query without reading the results
      db.run("CREATE TABLE test (col1, col2);");
      // Insert two rows: (1,111) and (2,222)
      db.run("INSERT INTO test VALUES (?,?), (?,?)", [1,111,2,222]);

      // Prepare a statement
      const stmt = db.prepare("SELECT * FROM test WHERE col1 BETWEEN $start AND $end");
      stmt.getAsObject({$start:1, $end:1}); // {col1:1, col2:111}

      // Bind new values
      stmt.bind({$start:1, $end:2});
      while(stmt.step()) { //
        const row = stmt.getAsObject();
        console.log('Here is a row: ' + JSON.stringify(row));
      }
      */
    });
  </script>
  </head>
  <body>
    Output is in Javascript console

    <a href="https://sql.js.org/#/">Documentation</a>
  </body>
</html>
